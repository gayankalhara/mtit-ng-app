<div class="widgets">

  <div class="row">
    <div class="col-md-9">

      <ba-card title="Create Invoice" baCardClass="with-scroll">
        <form [formGroup]="myForm" novalidate (ngSubmit)="save(myForm.value)">
          <div class="row">
            <div class="col-md-6">
              <ba-picture-uploader [picture]="profile.picture" [defaultPicture]="defaultPicture"
                                   [uploaderOptions]="uploaderOptions"></ba-picture-uploader>
            </div>

            <div class="col-md-6">
              <div class="form-group">
                <div class="row flex-center">
                  <div class="col-md-4">
                    <label for="invoiceNumber">Invoice Number</label>
                  </div>

                  <div class="col-md-8">
                    <input type="text" class="form-control" name="invoiceNumber" id="invoiceNumber"
                           placeholder="eg. AFR0001" formControlName="invoiceNumber">
                  </div>
                </div>
              </div>

              <div class="form-group">
                <div class="row flex-center">
                  <div class="col-md-4">
                    <label for="invoiceDate">Invoice Date</label>
                  </div>

                  <div class="col-md-8">
                    <my-date-picker name="invoiceDate" id="invoiceDate" formControlName="invoiceDate" [options]="myDatePickerOptions"
                                     required></my-date-picker>
                  </div>
                </div>
              </div>

              <div class="form-group">
                <div class="row flex-center">
                  <div class="col-md-4">
                    <label for="dueDate">Due Date</label>
                  </div>

                  <div class="col-md-8">
                    <my-date-picker name="dueDate" formControlName="dueDate" id="dueDate" [options]="myDatePickerOptions"
                                     required></my-date-picker>
                  </div>
                </div>
              </div>
            </div>


          </div>

          <div class="row">
            <div class="col-md-12">
              <table class="table">
                <thead>
                  <tr>
                    <th class="itemId">Item Id</th>
                    <th class="itemDescription">Description</th>
                    <th class="itemAmount">Amount</th>
                    <th class="itemActions">Actions</th>
                  </tr>
                </thead>
                <tbody>
                  <tr formArrayName="items" *ngFor="let address of myForm.controls.items.controls; let i=index">
                    <td class="itemId">{{i + 1}}</td>
                    <td class="itemDescription" [formGroupName]="i"><input type="text" class="form-control" formControlName="description"></td>
                    <td class="itemAmount" [formGroupName]="i"><input type="text" class="form-control" formControlName="amount" placeholder="0.00"></td>
                    <td class="itemActions"><button *ngIf="myForm.controls.items.controls.length > 1"
                                (click)="removeItem(i)"
                                class="btn btn-default btn-icon"
                                type="button"><i class="ion-close"></i></button></td>
                  </tr>
                </tbody>
              </table>



                <div class="add-another">
                  <button (click)="addItem()" class="btn btn-default btn-with-icon" type="button"><i class="ion-plus"></i>Add another item</button>
                </div>

                <div class="margin-20">
                  <button type="submit" class="btn btn-primary pull-right" [disabled]="!myForm.valid">Submit</button>
                </div>
                <div class="clearfix"></div>

                <div class="margin-20">
                  <div>Invoice JSON:</div>
                  <pre>Is valid?: <br>{{myForm.valid | json}}</pre>
                  <pre>Invoice Data: <br>{{myForm.value | json}}</pre>
                </div>

            </div>
          </div>
          </form>
      </ba-card>
    </div>

    <div class="col-md-3">
      <ba-card title="Actions" baCardClass="with-scroll">
        <button type="button" class="btn btn-primary btn-icon"><i class="ion-android-download"></i> Preview</button>
        <button type="button" class="btn btn-success btn-icon"><i class="ion-android-download"></i> Download PDF
        </button>
      </ba-card>
    </div>
  </div>
</div>
